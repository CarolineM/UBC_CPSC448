
<html>
	<head>
		<meta charset="utf-8">
		<title>Image Pixel Manipulation</title>
	</head>
	<body>
		<canvas id="canvas" width="400" height="400"></canvas>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		<script src="utils.js"></script>
		<script src="ImagePixelManipulation.js"></script>
		<script>
		$(document).ready(function() 
		{
			var canvas = document.getElementById('canvas');
			canvas.height = 900;
			canvas.width = 700;
			
			var context = canvas.getContext('2d');
			var image = new Image();
			image.src = "dhalsim.jpg";
			
			// Everyone likes drop shadows!
			context.shadowBlur = 20;
			context.shadowColor = "rgb(0, 0, 0)";
			
			$(image).load(function() {
				// can also use context.drawImage(image, x, y, width, height); to draw with preset size
				// can also use context.drawImage(image, cropSourceX, cropSourceY, cropWidth, cropHeight, drawX, drawY, drawWidth, drawHeight); to crop and then draw with preset size
				context.drawImage(image, 0, 0);
			 
				var imageData = context.createImageData(900,700);
				var pixel = imageData.data; // CanvasPixelArray
				
				/*
				Algorithm for Colour Cycling:
				1.) Pick a palette range that represents the colours you want to cycle
				2.) For each pixel that falls within the palette range, create a reference to it and cycle it from the darkest colour in that range to the lightest colour in that range.
				*/
				
				// Animation loop goes in here
				(function drawFrame () {
					// We'll bootstrap the code below to perform our colour cycling
					//window.requestAnimationFrame(drawFrame, canvas);
					//context.clearRect(0, 0, canvas.width, canvas.height);
					//draw(image, context);
				}());
			});
			
			canvas.click(function(e) {
				var canvasOffset = canvas.offset();
				var canvasX = Math.floor(e.pageX-canvasOffset.left);
				var canvasY = Math.floor(e.pageY-canvasOffset.top);
				
				var imageData = context.getImageData(canvasX, canvasY, 1, 1);
				var pixel = imageData.data;
				var pixelColor = "rgba("+pixel[0]+", "+pixel[1]+", "+pixel[2]+", "+pixel[3]+")";
				
				$("body").css("backgroundColor", pixelColor);
			});
		});	
		
		</script>
	</body>
</html>